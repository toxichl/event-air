!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.D=e()}(this,function(){"use strict";function t(){this.__openlog__=arguments&&"openlog"===arguments[0]?0:1,this.__maxListeners__=5,this.stack=[]}return t.log={repeatRegister:function(t){console.info("[Warning] event "+t+" has been registered")},notFound:function(t){console.error("[Error Code 404] event '"+t+"' is not registered")},maxLimit:function(t,e){console.error("[Warning] Listeners of event '"+t+"' goes beyond the maximum limit "+e)}},t.prototype.getEventByName=function(t){return this.stack.find(function(e){return e.name===t})},t.prototype.getListener=function(t,e){return t?t.listeners.find(function(t){return t===e}):void 0},t.prototype.setMaxListeners=function(t){return this.__maxListeners__=t,this},t.prototype._baseRegister=function(t,e,n){var r=this.getEventByName(t),i=this.getListener(r,e),s=this.__maxListeners__;return r?i||(r.listeners.push(e),r.listeners.length>s&&Event.log.maxLimit(t,s)):this.stack.push({name:t,listeners:[e],typeId:n}),this},t.prototype.on=function(t,e){return this._baseRegister(t,e,1)},t.prototype.once=function(t,e){return this._baseRegister(t,e,2)},t.prototype._baseCatch=function(t){return this.errorCatch&&this.errorCatch(t),null},t.prototype.emit=function(t){var e=this.getEventByName(t);if(!e)return this.__openlog__&&Event.log.notFound(t),this._baseCatch(404),this;0===e.listeners.length&&this._baseCatch(405);var n=!0,r=!1,i=void 0;try{for(var s,o=e.listeners[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){(0,s.value)()}}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return 2===e.typeId&&this.stack.splice(this.stack.indexOf(e),1),this},t.prototype.removeListener=function(t,e){var n=this.getEventByName(t),r=this.getListener(n,e);return n?r?(n.listeners.splice(n.listeners.indexOf(r),1),this):(this._baseCatch(405),this):(this._baseCatch(404),this)},t.prototype.removeAllListeners=function(){var t=this;if(0===arguments.length){var e=!0,n=!1,r=void 0;try{for(var i,s=this.stack[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){i.value.listeners=[]}}catch(t){n=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw r}}return this}return Array.prototype.forEach.call(arguments,function(e){if("string"==typeof e){t.getEventByName(e).listeners=[]}}),this},t.prototype.listeners=function(t){var e=this.getEventByName(t);return e?e.listeners:this._baseCatch(405)},t.prototype.catch=function(t){this.errorCatch="function"==typeof t?t:null},t});
