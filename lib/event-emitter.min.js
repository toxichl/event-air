!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(){this.__openlog__=arguments&&"openlog"===arguments[0]?0:1,this.__maxListeners__=5,this.stack=[]}t.log={repeatRegister:function(t){console.info("[Warning] event "+t+" has been registered")},notFound:function(t){console.error("[Error Code 404] event '"+t+"' is not registered")},maxLimit:function(t,e){console.error("[Warning] Listeners of event '"+t+"' goes beyond the maximum limit "+e)}},t.prototype.getEventByName=function(t){return this.stack.find(function(e){return e.name===t})},t.prototype.getListener=function(t,e){return t?t.listeners.find(function(t){return t===e}):void 0},t.prototype.setMaxListeners=function(t){return this.__maxListeners__=t,this},t.prototype._baseRegister=function(e,n,r){var i=this.getEventByName(e),o=this.getListener(i,n),s=this.__maxListeners__;return i?o||(i.listeners.push(n),i.listeners.length>s&&t.log.maxLimit(e,s)):this.stack.push({name:e,listeners:[n],typeId:r}),this},t.prototype.on=function(t,e){return this._baseRegister(t,e,1)},t.prototype.once=function(t,e){return this._baseRegister(t,e,2)},t.prototype._baseCatch=function(t){return this.errorCatch&&this.errorCatch(t),null},t.prototype.emit=function(e){var n=this.getEventByName(e);if(!n)return this.__openlog__&&t.log.notFound(e),this._baseCatch(404),this;0===n.listeners.length&&this._baseCatch(405);var r=!0,i=!1,o=void 0;try{for(var s,a=n.listeners[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){(0,s.value)()}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return 2===n.typeId&&this.stack.splice(this.stack.indexOf(n),1),this},t.prototype.removeListener=function(t,e){var n=this.getEventByName(t),r=this.getListener(n,e);return n?r?(n.listeners.splice(n.listeners.indexOf(r),1),this):(this._baseCatch(405),this):(this._baseCatch(404),this)},t.prototype.removeAllListeners=function(){var t=this;if(0===arguments.length){var e=!0,n=!1,r=void 0;try{for(var i,o=this.stack[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.listeners=[]}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return this}return Array.prototype.forEach.call(arguments,function(e){if("string"==typeof e){t.getEventByName(e).listeners=[]}}),this},t.prototype.listeners=function(t){var e=this.getEventByName(t);return e?e.listeners:this._baseCatch(405)},t.prototype.catch=function(t){this.errorCatch="function"==typeof t?t:null};var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"object"===("undefined"==typeof window?"undefined":e(window))&&(window.Event=t)});
